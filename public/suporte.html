<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de admin</title>
    <link rel="stylesheet" href="./css/admin.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="icon" href="assets/Logo - TechGuard 1.png">
    <link rel="stylesheet" href="./components/menu_admin.css">
    <link rel="stylesheet" href="./css/suporte.css">
    <script src="./components/menu_admin.js"></script>
</head>

<body>


    <section class="main">
        <div class="container">
            <sidebar-menu></sidebar-menu>
            <section class="suporte">
                <form id="formChamado" action="https://api.staticforms.xyz/submit" method="post">
                    <input type="text" name="tema" placeholder="Tema do Chamado" id="tema" required>
                    <select name="prioridade" id="prioridade" required>
                        <option value="" selected disabled>Selecione a Prioridade</option>
                        <option value="Baixa">Baixa</option>
                        <option value="Média">Média</option>
                        <option value="Alta">Alta</option>
                        <option value="Extrema">Extrema</option>
                    </select>
                    <textarea name="descricao" class="descricao" placeholder="Descrição do Chamado" required></textarea>
                
                    <!-- Campos ocultos para Static Forms -->
                    <input type="hidden" name="accessKey" value="982d06b1-f682-4a60-b757-75b3c052bfdb">
                    <input type="hidden" name="emailTo" value="techguardsolutions.suporte@gmail.com">
                
                    <input type="submit" value="ENVIAR"/>
                </form>

            </section>
        </div>
    </section>

</body>
</html>
<script>
document.getElementById("formChamado").addEventListener("submit", async function(event) {
  event.preventDefault(); // Evita o envio direto do formulário

  const tema = document.getElementById("tema").value;
  const prioridade = document.getElementById("prioridade").value;
  const descricao = document.querySelector(".descricao").value;
  const fk_usuario = 1; // Supondo que já conhecemos o ID do usuário; adapte conforme necessário

  // Envia os dados para a API para criar o chamado no banco de dados
  await criarChamado(tema, prioridade, descricao, fk_usuario);
});
</script>
<script src="./js/administracaoChamados.js"></script>