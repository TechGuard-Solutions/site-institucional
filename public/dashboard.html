<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/dashboard.css">
    <title>Dashboard</title>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="icon" href="assets/Logo - TechGuard 1.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.js"></script>
    <script src="js/dashboard.js"></script>

</head>

<body>
    <div class="todo-fundo">
        <div class="menu-lateral" id="menu-lateral">
            <span class="material-symbols-outlined" onclick="abrir()" id="menu">
                menu
            </span>
            <span class="material-symbols-outlined dashboard-logo" id="dashboard-logo">
                bar_chart
            </span>
            <span class="material-symbols-outlined" id="mark_chat_unread">
                mark_chat_unread
            </span>
            <span class="material-symbols-outlined" id="upload_file">
                upload_file
            </span>
            <span class="material-symbols-outlined" id="notifications_active">
                notifications_active
            </span>
            <span class="material-symbols-outlined" id="help">
                help
            </span>
        </div>
        <div class="fundo-infos">
            <div class="infos-nome">
                <p id="nomeEmpresa">NOME DA EMPRESA</p>
                <p id="nomeUsuario">NOME DO USUARIO</p>
            </div>
            <div class="kpis">
                <div class="kpi kpi-cinza">Taxa de Risco</div>
                <div class="kpi">Ataques bem sucedidos</div>
                <div class="kpi">Ataques mal sucedidos</div>
            </div>
            <div class="graficos">

                <canvas id="myChart"></canvas>
                <canvas id="myChart2"></canvas>

            </div>
        </div>
    </div>
</body>

</html>

<script>
    nomeEmpresa.innerHTML = `${sessionStorage.nomeEmpresa}`
    nomeUsuario.innerHTML = `${sessionStorage.nomeUsuario}`

    const ctx = document.getElementById('myChart');

    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Scam', 'Roubo de Dados', 'Phishing', 'Ataques DDoS', 'Software malicioso', 'Sites Fraudulentos'],
            datasets: [{
                label: 'Seis maiores ataques no ultimo mês',
                data: [19, 15, 12, 5, 3, 2],
                borderWidth: 1,
                fill: true,
                borderColor: 'white',
                backgroundColor: [
                    'rgb(255, 99, 132)', // Cor da primeira barra
                    'rgba(54, 162, 235)', // Cor da segunda barra
                    'rgba(255, 206, 86)', // Cor da terceira barra
                    'rgba(75, 192, 192)',  // Cor da quarta barra
                    'rgba(153, 102, 255)', // Cor da quinta barra
                    'rgba(255, 159, 64)'  // Cor da sexta barra    
                ], borderWidth: 2,
                tension: 0.1,
            }]
        },
        options: {
            indexAxis: 'y',
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: {
                        color: '#FFF',
                        font: {
                            size: 15
                        }
                    },
                    grid: {
                        display: false,
                        color: '#FFF'
                    }
                },
                x: {
                    ticks: {
                        color: '#FFF',
                        font: {
                            size: 15
                        }
                    },
                    grid: {
                        drawOnChart: true,
                        color: '#FFF'
                    }
                }
            },
            plugins: {
                title: {
                    display: true,
                    text: 'Seis maiores ataques no ultimo mês',
                    font: {
                        size: 20,
                    },
                    color: '#FFF',
                },
                legend: {
                    display: false,
                    labels: {
                        hidden: true,
                        color: '#ffffff',
                        font: {
                            size: 20
                        }
                    }
                }
            },
        }


    });

    const ctx2 = document.getElementById('myChart2').getContext('2d');

    const nValues1 = [];
    const nValues2 = [];
    const nValues3 = [];
    const nValues4 = [];
    const nValues5 = [];
    const nValues6 = [];



    for (let index = 0; index < 5; index++) {
        nValues1.push(Math.floor(Math.random() * 20));
        nValues2.push(Math.floor(Math.random() * 20));
        nValues3.push(Math.floor(Math.random() * 20));
        nValues4.push(Math.floor(Math.random() * 20));
        nValues5.push(Math.floor(Math.random() * 20));
        nValues6.push(Math.floor(Math.random() * 20));
    }

    // Adiciona um valor fixo ou um novo valor aleatório ao último índice
    nValues1.push(19);
    nValues2.push(15);
    nValues3.push(12);
    nValues4.push(5);
    nValues5.push(3);
    nValues6.push(2);

    const myChart = new Chart(ctx2, {

        type: 'line',
        data: {
            labels: ['04/24', '05/24', '06/24', '07/24', '08/24', '09/24'],
            datasets: [
                {
                    label: 'Scam',
                    data: nValues1,
                    hidden: false,
                    fill: false,
                    borderColor: 'rgb(255, 99, 132)',
                    backgroundColor: 'rgb(255, 99, 132)',
                    borderWidth: 5,
                },
                {
                    label: 'Roubo de Dados',
                    data: nValues2,
                    fill: false,
                    hidden: true,
                    borderColor: 'rgba(54, 162, 235)',
                    backgroundColor: 'rgba(54, 162, 235)',
                    borderWidth: 5
                },
                {
                    label: 'Phishing',
                    data: nValues3,
                    fill: false,
                    hidden: true,
                    borderColor: 'rgba(255, 206, 86)',
                    backgroundColor: 'rgba(255, 206, 86)',
                    borderWidth: 5
                },
                {
                    label: 'Ataques DDoS',
                    data: nValues4,
                    fill: false,
                    hidden: true,
                    borderColor: 'rgba(75, 192, 192)',
                    backgroundColor: 'rgba(75, 192, 192)',
                    borderWidth: 5
                },
                {
                    label: 'Software malicioso',
                    data: nValues5,
                    fill: false,
                    hidden: true,
                    borderColor: 'rgba(153, 102, 255)',
                    backgroundColor: 'rgba(153, 102, 255)',
                    borderWidth: 5
                },
                {
                    label: 'Sites Fraudulentos',
                    data: nValues6,
                    fill: false,
                    hidden: true,
                    borderColor: 'rgba(255, 159, 64)',
                    backgroundColor: 'rgba(255, 159, 64)',
                    borderWidth: 5
                }
            ],
        },

        options: {
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: {
                        color: '#FFF',
                        font: {
                            size: 15,
                        }
                    },
                    grid: {
                        display: false,
                        color: '#FFF',
                    }
                },
                x: {
                    ticks: {
                        color: '#FFF',
                        font: {
                            size: 15,
                        }
                    },
                    grid: {
                        color: '#FFF',
                    }
                }
            },
            plugins: {
                title: {
                    display: true,
                    text: 'Linha do tempo de cada ataque ao longo dos ultimos meses',
                    font: {
                        size: 20,
                    },
                    color: '#FFF',
                },
                legend: {
                    labels: {
                        color: '#ffffff',
                        font: {
                            size: 20,
                        }
                    }
                }
            },
        }
    });

</script>